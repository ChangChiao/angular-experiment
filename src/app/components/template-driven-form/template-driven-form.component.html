<form
  #form="ngForm"
  (ngSubmit)="onSubmitForm(form)"
  [ngFormOptions]="{ updateOn: 'blur' }"
>
  <label for="name">First Name</label>
  <pre>{{ data | json }}</pre>
  <input
    [(ngModel)]="data.userName"
    [ngModelOptions]="{ name: 'userName', updateOn: 'blur' }"
    required
    pattern="^[a-zA-Z0-9_.]+$"
    minlength="5"
    name="userName"
    type="text"
    placeholder="Enter your name"
  />
  <fieldset ngModelGroup="address">
    <label for="city">City</label>
    <input
      [(ngModel)]="data.address.city"
      name="city"
      type="text"
      placeholder="Enter your city"
    />
    <label for="state">street</label>
    <input
      [(ngModel)]="data.address.street"
      name="state"
      type="text"
      placeholder="Enter your state"
    />
  </fieldset>

  <!-- standalone = out of form control -->

  <!-- <input
    [(ngModel)]="data.userName"
    [ngModelOptions]="{ name: 'userName', updateOn: 'blur', standalone: true}"
    name="userName"
    type="text"
    placeholder="Enter your name"
  /> -->
  <button [disabled]="form.invalid" type="submit">submit</button>
</form>
